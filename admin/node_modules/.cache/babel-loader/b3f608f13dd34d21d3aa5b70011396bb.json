{"remainingRequest":"/www/admin/node_modules/thread-loader/dist/cjs.js!/www/admin/node_modules/babel-loader/lib/index.js!/www/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/www/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/www/admin/src/views/Setting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/www/admin/src/views/Setting.vue","mtime":1565340815000},{"path":"/www/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/www/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/www/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/www/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/www/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$assign from \"/www/admin/node_modules/@babel/runtime-corejs2/core-js/object/assign\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Editor from '../components/Editor';\nexport default {\n  name: 'setting',\n  components: {\n    Editor: Editor\n  },\n  data: function data() {\n    return {\n      tabName: 'trade',\n      form: {\n        rate_1: 0,\n        rate_2: 0,\n        rate_3: 0,\n        price_1: 0,\n        price_2: 0,\n        price_3: 0,\n        price_4: 0,\n        price_5: 0,\n        price_6: 0,\n        first_rate: 0,\n        range: 0,\n        allow_register: true\n      },\n      ips: [],\n      logs: [],\n      pops: [],\n      pop: {\n        id: '',\n        title: '',\n        x: '',\n        xt: 'left',\n        y: '',\n        yt: 'top',\n        width: '',\n        height: '',\n        content: ''\n      },\n      show: {\n        update: false,\n        edit: false\n      }\n    };\n  },\n  watch: {\n    tabName: function tabName(v) {\n      if (v === 'pop') {\n        this.getPops();\n      }\n    }\n  },\n  methods: {\n    getData: function getData() {\n      var _this = this;\n\n      this.$api.get('/settings').then(function (data) {\n        if (data) {\n          _this.form = data.base;\n          _this.ips = data.ips;\n          _this.logs = data.logs;\n        }\n      });\n    },\n    update: function update() {\n      var _this2 = this;\n\n      this.$api.put('/settings', this.form).then(function (data) {\n        if (data) {\n          _this2.$message.success(_this2.$t('config_success'));\n\n          _this2.getData();\n        }\n      });\n    },\n    addIp: function addIp() {\n      this.ips.push('');\n    },\n    delIp: function delIp(index) {\n      this.ips.splice(index, 1);\n    },\n    updateIp: function updateIp() {\n      var _this3 = this;\n\n      this.$api.put('/settings/ips', {\n        ips: this.ips\n      }).then(function (data) {\n        if (data) {\n          _this3.$message.success(_this3.$t('config_success'));\n\n          _this3.getData();\n        }\n      });\n    },\n    resetData: function resetData(type) {\n      this.$prompt(\"<span style=\\\"color: #FD4322\\\">\".concat(this.$t('clear_warn'), \"</span>\"), this.$t('warn'), {\n        confirmButtonText: this.$t('btnYes'),\n        cancelButtonText: this.$t('btnNo'),\n        inputType: 'password',\n        dangerouslyUseHTMLString: true,\n        beforeClose: function beforeClose(action, instance, done) {\n          var _this4 = this;\n\n          if (action === 'confirm') {\n            this.$api.post('/datas/clean', {\n              type: type,\n              password: instance.inputValue\n            }).then(function (data) {\n              if (data) {\n                done();\n\n                _this4.$message.success(_this4.$t('success'));\n              }\n            });\n          } else {\n            done();\n          }\n        }\n      }).catch(function () {});\n    },\n    getPops: function getPops() {\n      var _this5 = this;\n\n      this.$api.get('/settings/pops').then(function (data) {\n        if (data) {\n          _this5.pops = data;\n        }\n      });\n    },\n    resetForm: function resetForm() {\n      this.show.edit = false;\n      this.pop = _Object$assign({}, this.$options.data().pop);\n    },\n    edit: function edit(row) {\n      var pop = {};\n\n      for (var i in this.pop) {\n        if (this.pop.hasOwnProperty(i) && row.hasOwnProperty(i)) {\n          pop[i] = row[i];\n        }\n      }\n\n      this.pop = pop;\n      this.show.update = true;\n      this.show.edit = true;\n    },\n    submit: function submit() {\n      var _this6 = this;\n\n      if (this.pop.id > 0) {\n        this.$api.put(\"/settings/pops/\".concat(this.pop.id), this.pop).then(function (data) {\n          if (data) {\n            _this6.show.update = false;\n\n            _this6.getPops();\n          }\n        });\n      } else {\n        this.$api.post('/settings/pops', this.pop).then(function (data) {\n          if (data) {\n            _this6.show.update = false;\n\n            _this6.getPops();\n          }\n        });\n      }\n    },\n    toggleEnable: function toggleEnable(_ref) {\n      var _this7 = this;\n\n      var id = _ref.id,\n          is_enable = _ref.is_enable;\n      this.$api.patch(\"/settings/pops/\".concat(id), {\n        is_enable: is_enable\n      }).then(function (data) {\n        if (data) {\n          _this7.getPops();\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getData();\n  }\n};",{"version":3,"sources":["Setting.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-tabs type=\"card\" v-model=\"tabName\">\n      <el-tab-pane :label=\"$t('base_setting')\" name=\"trade\">\n        <el-form label-width=\"100px\" style=\"width: 500px\">\n          <el-form-item :label=\"`Buy${$t('rate')}`\">\n            <el-input v-model=\"form.rate_1\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"`Sell${$t('rate')}`\">\n            <el-input v-model=\"form.rate_2\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"`Cancel${$t('rate')}`\">\n            <el-input v-model=\"form.rate_3\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('jiage')\" class=\"form-price\">\n            <el-row :gutter=\"10\">\n              <el-col :span=\"8\">\n                <el-input v-model=\"form.price_1\"></el-input>\n              </el-col>\n              <el-col :span=\"8\">\n                <el-input v-model=\"form.price_2\"></el-input>\n              </el-col>\n              <el-col :span=\"8\">\n                <el-input v-model=\"form.price_3\"></el-input>\n              </el-col>\n            </el-row>\n            <el-row :gutter=\"10\" style=\"margin-top: 10px;\">\n              <el-col :span=\"8\">\n                <el-input v-model=\"form.price_4\"></el-input>\n              </el-col>\n              <el-col :span=\"8\">\n                <el-input v-model=\"form.price_5\"></el-input>\n              </el-col>\n              <el-col :span=\"8\">\n                <el-input v-model=\"form.price_6\"></el-input>\n              </el-col>\n            </el-row>\n          </el-form-item>\n          <el-form-item :label=\"$t('first_rate')\">\n            <el-input v-model=\"form.first_rate\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('range')\">\n            <el-input v-model=\"form.range\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('open')\">\n            <el-switch v-model=\"form.allow_register\"></el-switch>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"update\" v-t=\"'save'\"></el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n      <el-tab-pane :label=\"$t('firewall')\" name=\"firewall\">\n        <h4 class=\"h4\" v-t=\"'admin_ip'\"></h4>\n        <el-form label-width=\"100px\" style=\"width: 500px\">\n          <el-form-item :label=\"`IP${i+1}`\" v-for=\"(ip, i) in ips\" :key=\"i\">\n            <el-input v-model=\"ips[i]\">\n              <el-button slot=\"suffix\" size=\"small\" type=\"danger\" v-if=\"ips.length > 1\" @click=\"delIp(i)\" v-t=\"'del'\"></el-button>\n            </el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"success\" @click=\"addIp\" v-t=\"'add'\"></el-button>\n            <el-button type=\"primary\" @click=\"updateIp\" v-t=\"'save'\"></el-button>\n          </el-form-item>\n        </el-form>\n        <h4 class=\"h4 mt\" v-t=\"'login_log'\"></h4>\n        <div class=\"ip-list\">\n          <p v-for=\"l in logs\" :key=\"l.id\">\n            {{l.time}}\n            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n            {{l.ip}}\n            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n            <template>\n              <el-tag size=\"mini\" type=\"success\" v-if=\"l.success\" v-t=\"'succ'\"></el-tag>\n              <el-tag size=\"mini\" type=\"danger\" v-else v-t=\"'shibai'\"></el-tag>\n            </template>\n          </p>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane :label=\"$t('pop')\" name=\"pop\">\n        <div class=\"toolbar\">\n          <el-button type=\"success\" size=\"small\" @click=\"() => {show.update = true;show.edit = true}\">+ {{$t('add')}}</el-button>\n        </div>\n        <el-table\n            :data=\"pops\"\n            size=\"mini\"\n            row-key=\"id\">\n          <el-table-column prop=\"id\" label=\"#\"></el-table-column>\n          <el-table-column :label=\"$t('title')\">\n            <span class=\"a\" slot-scope=\"{row}\" @click=\"edit(row)\">{{row.title}}</span>\n          </el-table-column>\n          <el-table-column :label=\"$t('width')\">\n            <span slot-scope=\"{row}\">{{row.width}}px</span>\n          </el-table-column>\n          <el-table-column :label=\"$t('height')\">\n            <span slot-scope=\"{row}\">{{row.height}}px</span>\n          </el-table-column>\n          <el-table-column label=\"X\">\n            <template slot-scope=\"{row}\">\n              <span v-if=\"row.xt === 'center'\">{{row.xt}}</span>\n              <span v-else>{{row.xt}}:{{row.x}}px</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"Y\">\n            <template slot-scope=\"{row}\">\n              <span v-if=\"row.yt === 'center'\">{{row.yt}}</span>\n              <span v-else>{{row.yt}}:{{row.y}}px</span>\n            </template>\n          </el-table-column>\n          <el-table-column :label=\"$t('status')\" min-width=\"140\">\n            <template slot-scope=\"{row}\">\n              <el-switch\n                  v-model=\"row.is_enable\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  :active-text=\"$t('enable')\"\n                  :inactive-text=\"$t('disable')\"\n                  @change=\"toggleEnable(row)\">\n              </el-switch>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-tab-pane>\n      <el-tab-pane :label=\"$t('clear')\" name=\"clear\">\n        <el-form label-width=\"160px\">\n          <el-form-item :label=\"$t('reset_member_login')\">\n            <el-button size=\"small\" type=\"danger\" @click=\"resetData(1)\" v-t=\"'reset'\"></el-button>\n          </el-form-item>\n          <el-form-item :label=\"$t('del_member_order')\">\n            <el-button size=\"small\" type=\"danger\" @click=\"resetData(2)\" v-t=\"'del'\"></el-button>\n          </el-form-item>\n          <el-form-item :label=\"$t('del_member_account')\">\n            <el-button size=\"small\" type=\"danger\" @click=\"resetData(3)\" v-t=\"'del'\"></el-button>\n          </el-form-item>\n          <el-form-item :label=\"$t('del_member_finance')\">\n            <el-button size=\"small\" type=\"danger\" @click=\"resetData(4)\" v-t=\"'del'\"></el-button>\n          </el-form-item>\n          <el-form-item :label=\"$t('del_member_question')\">\n            <el-button size=\"small\" type=\"danger\" @click=\"resetData(5)\" v-t=\"'del'\"></el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n    </el-tabs>\n    <el-dialog :title=\"!!pop.id ? $t('edit') : $t('add')\" :visible.sync=\"show.update\" width=\"900px\" @closed=\"resetForm\">\n      <el-form label-width=\"60px\" @submit.native.prevent size=\"mini\">\n        <el-form-item :label=\"$t('title')\">\n          <el-input v-model=\"pop.title\"></el-input>\n        </el-form-item>\n        <el-row :gutter=\"10\">\n          <el-col :span=\"12\">\n            <el-form-item label=\"X\">\n              <el-input v-model=\"pop.x\" class=\"input-with-select\" :disabled=\"pop.xt === 'center'\">\n                <el-select v-model=\"pop.xt\" slot=\"prepend\">\n                  <el-option value=\"left\" :label=\"$t('left')\"></el-option>\n                  <el-option value=\"center\" :label=\"$t('center')\"></el-option>\n                  <el-option value=\"right\" :label=\"$t('right')\"></el-option>\n                </el-select>\n                <span slot=\"append\">px</span>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"Y\">\n              <el-input v-model=\"pop.y\" class=\"input-with-select\" :disabled=\"pop.yt === 'center'\">\n                <el-select v-model=\"pop.yt\" slot=\"prepend\">\n                  <el-option value=\"top\" :label=\"$t('top')\"></el-option>\n                  <el-option value=\"center\" :label=\"$t('center')\"></el-option>\n                  <el-option value=\"bottom\" :label=\"$t('bottom')\"></el-option>\n                </el-select>\n                <span slot=\"append\">px</span>\n              </el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row :gutter=\"10\">\n          <el-col :span=\"12\">\n            <el-form-item :label=\"$t('width')\">\n              <el-input v-model=\"pop.width\">\n                <span slot=\"append\">px</span>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item :label=\"$t('height')\">\n              <el-input v-model=\"pop.height\">\n                <span slot=\"append\">px</span>\n              </el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-form-item :label=\"$t('content')\">\n          <Editor ref=\"editor\" v-model=\"pop.content\" v-if=\"show.edit\"></Editor>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"show.update = false\" v-t=\"'btnNo'\"></el-button>\n        <el-button type=\"primary\" v-t=\"'btnYes'\" @click=\"submit\"></el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Editor from '../components/Editor'\n\n  export default {\n    name: 'setting',\n    components: {Editor},\n    data() {\n      return {\n        tabName: 'trade',\n        form: {\n          rate_1: 0,\n          rate_2: 0,\n          rate_3: 0,\n          price_1: 0,\n          price_2: 0,\n          price_3: 0,\n          price_4: 0,\n          price_5: 0,\n          price_6: 0,\n          first_rate: 0,\n          range: 0,\n          allow_register: true\n        },\n        ips: [],\n        logs: [],\n        pops: [],\n        pop: {\n          id: '',\n          title: '',\n          x: '',\n          xt: 'left',\n          y: '',\n          yt: 'top',\n          width: '',\n          height: '',\n          content: ''\n        },\n        show: {\n          update: false,\n          edit: false\n        },\n      }\n    },\n    watch: {\n      tabName(v) {\n        if (v === 'pop') {\n          this.getPops()\n        }\n      }\n    },\n    methods: {\n      getData() {\n        this.$api.get('/settings').then(data => {\n          if (data) {\n            this.form = data.base\n            this.ips = data.ips\n            this.logs = data.logs\n          }\n        })\n      },\n      update() {\n        this.$api.put('/settings', this.form).then(data => {\n          if (data) {\n            this.$message.success(this.$t('config_success'))\n            this.getData()\n          }\n        })\n      },\n      addIp() {\n        this.ips.push('')\n      },\n      delIp(index) {\n        this.ips.splice(index, 1)\n      },\n      updateIp() {\n        this.$api.put('/settings/ips', {ips: this.ips}).then(data => {\n          if (data) {\n            this.$message.success(this.$t('config_success'))\n            this.getData()\n          }\n        })\n      },\n      resetData(type) {\n        this.$prompt(`<span style=\"color: #FD4322\">${this.$t('clear_warn')}</span>`, this.$t('warn'), {\n          confirmButtonText: this.$t('btnYes'),\n          cancelButtonText: this.$t('btnNo'),\n          inputType: 'password',\n          dangerouslyUseHTMLString: true,\n          beforeClose(action, instance, done) {\n            if (action === 'confirm') {\n              this.$api.post('/datas/clean', {\n                type,\n                password: instance.inputValue\n              }).then(data => {\n                if (data) {\n                  done()\n                  this.$message.success(this.$t('success'))\n                }\n              })\n            } else {\n              done()\n            }\n          }\n        }).catch(() => {})\n      },\n      getPops() {\n        this.$api.get('/settings/pops').then(data => {\n          if (data) {\n            this.pops = data\n          }\n        })\n      },\n      resetForm() {\n        this.show.edit = false\n        this.pop = Object.assign({}, this.$options.data().pop)\n      },\n      edit(row) {\n        let pop = {}\n        for (let i in this.pop) {\n          if (this.pop.hasOwnProperty(i) && row.hasOwnProperty(i)) {\n            pop[i] = row[i]\n          }\n        }\n        this.pop = pop\n        this.show.update = true\n        this.show.edit = true\n      },\n      submit() {\n        if (this.pop.id > 0) {\n          this.$api.put(`/settings/pops/${this.pop.id}`, this.pop).then(data => {\n            if (data) {\n              this.show.update = false\n              this.getPops()\n            }\n          })\n        } else {\n          this.$api.post('/settings/pops', this.pop).then(data => {\n            if (data) {\n              this.show.update = false\n              this.getPops()\n            }\n          })\n        }\n      },\n      toggleEnable({id, is_enable}) {\n        this.$api.patch(`/settings/pops/${id}`, {is_enable}).then(data => {\n          if (data) {\n            this.getPops()\n          }\n        })\n      }\n    },\n    mounted() {\n      this.getData()\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  .form-price label {\n    width: 95px !important;\n  }\n\n  h4.h4 {\n    line-height: 30px;\n    margin: 0;\n    margin-bottom: 10px;\n    width: 100px;\n    text-align: right;\n\n    &.mt {\n      margin-top: 30px;\n    }\n  }\n\n  .ip-list {\n    color: #606266;\n    padding-left: 100px;\n    line-height: 28px;\n  }\n\n  .el-select .el-input {\n    width: 86px;\n    cursor: default;\n  }\n\n  .input-with-select .el-input-group__prepend {\n    background-color: #fff;\n  }\n</style>\n"],"sourceRoot":"src/views"}]}