{"remainingRequest":"/www/admin/node_modules/thread-loader/dist/cjs.js!/www/admin/node_modules/babel-loader/lib/index.js!/www/admin/src/router.js","dependencies":[{"path":"/www/admin/src/router.js","mtime":1565340815000},{"path":"/www/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/www/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/www/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.function.name\";\nimport Vue from 'vue';\nimport store from './store';\nimport Router from 'vue-router';\nVue.use(Router);\nvar router = new Router({\n  'mode': 'history',\n  routes: [{\n    path: '/login',\n    name: 'login',\n    component: function component() {\n      return import('./views/Login');\n    }\n  }, {\n    path: '/',\n    components: {\n      header: function header() {\n        return import('./views/layout/Header');\n      },\n      navmenu: function navmenu() {\n        return import('./views/layout/NavMenu');\n      },\n      main: function main() {\n        return import('./views/layout/Main');\n      }\n    },\n    children: [{\n      path: '',\n      name: 'home',\n      component: function component() {\n        return import('./views/Home');\n      }\n    }, {\n      path: 'agent',\n      name: 'agent',\n      component: function component() {\n        return import('./views/Agent');\n      }\n    }, {\n      path: 'order',\n      name: 'order',\n      component: function component() {\n        return import('./views/Order');\n      }\n    }, {\n      path: 'account',\n      name: 'account',\n      component: function component() {\n        return import('./views/Account');\n      }\n    }, {\n      path: 'finance',\n      name: 'finance',\n      component: function component() {\n        return import('./views/Finance');\n      }\n    }, {\n      path: 'message',\n      name: 'message',\n      component: function component() {\n        return import('./views/Message');\n      }\n    }, {\n      path: 'statistic',\n      name: 'statistic',\n      component: function component() {\n        return import('./views/Statistic');\n      }\n    }, {\n      path: 'setting',\n      name: 'setting',\n      component: function component() {\n        return import('./views/Setting');\n      }\n    }, {\n      path: '*',\n      name: 'e404' // component: () => import('./components/404')\n\n    }]\n  }]\n});\nvar block_agents = ['agent', 'finance', 'message', 'setting'];\nrouter.beforeEach(function (_ref, from, next) {\n  var name = _ref.name;\n  var token = store.state.token;\n\n  if (token) {\n    // 登录\n    if (name === 'login') {\n      next({\n        name: 'home'\n      });\n    } else {\n      // 代理拦截\n      if (!store.state.isAdmin && block_agents.includes(name)) {\n        next({\n          name: 'home'\n        });\n      } else {\n        next();\n      }\n    }\n  } else {\n    // 未登录\n    if (name === 'login') {\n      next();\n    } else {\n      next({\n        name: 'login'\n      });\n    }\n  }\n});\nexport default router;",{"version":3,"sources":["/www/admin/src/router.js"],"names":["Vue","store","Router","use","router","routes","path","name","component","components","header","navmenu","main","children","block_agents","beforeEach","from","next","token","state","isAdmin","includes"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport store from './store'\nimport Router from 'vue-router'\n\nVue.use(Router)\nconst router = new Router({\n  'mode': 'history',\n  routes: [\n    {\n      path: '/login',\n      name: 'login',\n      component: () => import('./views/Login')\n    },\n    {\n      path: '/',\n      components: {\n        header: () => import('./views/layout/Header'),\n        navmenu: () => import('./views/layout/NavMenu'),\n        main: () => import('./views/layout/Main')\n      },\n      children: [\n        {\n          path: '',\n          name: 'home',\n          component: () => import('./views/Home')\n        },\n        {\n          path: 'agent',\n          name: 'agent',\n          component: () => import('./views/Agent')\n        },\n        {\n          path: 'order',\n          name: 'order',\n          component: () => import('./views/Order')\n        },\n        {\n          path: 'account',\n          name: 'account',\n          component: () => import('./views/Account')\n        },\n        {\n          path: 'finance',\n          name: 'finance',\n          component: () => import('./views/Finance')\n        },\n        {\n          path: 'message',\n          name: 'message',\n          component: () => import('./views/Message')\n        },\n        {\n          path: 'statistic',\n          name: 'statistic',\n          component: () => import('./views/Statistic')\n        },\n        {\n          path: 'setting',\n          name: 'setting',\n          component: () => import('./views/Setting')\n        },\n        {\n          path: '*',\n          name: 'e404',\n          // component: () => import('./components/404')\n        }\n      ]\n    }\n  ]\n})\n\nlet block_agents = [\n  'agent',\n  'finance',\n  'message',\n  'setting'\n]\n\nrouter.beforeEach(({name}, from, next) => {\n  let token = store.state.token\n\n  if (token) {\n    // 登录\n    if (name === 'login') {\n      next({name: 'home'})\n    } else {\n      // 代理拦截\n      if (!store.state.isAdmin && block_agents.includes(name)) {\n        next({name: 'home'})\n      } else {\n        next()\n      }\n    }\n  } else {\n    // 未登录\n    if (name === 'login') {\n      next()\n    } else {\n      next({name: 'login'})\n    }\n  }\n})\n\nexport default router\n"]}]}