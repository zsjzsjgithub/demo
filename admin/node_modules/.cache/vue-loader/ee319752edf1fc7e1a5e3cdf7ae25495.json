{"remainingRequest":"/www/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/www/admin/src/views/layout/Header.vue?vue&type=style&index=0&id=2c29ada0&scoped=true&lang=less&","dependencies":[{"path":"/www/admin/src/views/layout/Header.vue","mtime":1565340815000},{"path":"/www/admin/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/www/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/www/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/www/admin/node_modules/less-loader/dist/cjs.js","mtime":1566977816838},{"path":"/www/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/www/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"../../assets/config\";\n\n.top-bar {\n  background: @color_deep;\n\n  &-main {\n    .wm;\n    line-height: 46px;\n    height: 46px;\n    overflow: hidden;\n    color: #fff;\n    font-size: 12px;\n\n    a {\n\n      &:hover {\n        text-decoration: underline;\n      }\n      em {\n        font-style: normal;\n        color: #FD4322;\n      }\n    }\n  }\n}\n\n.menu {\n  background: @color_blue;\n  color: #fff;\n  line-height: 64px;\n\n  .main {\n    overflow: auto;\n    padding: 0 20px;\n\n    .rt {\n      .fr;\n\n      .account {\n        .fl;\n        margin-top: (64-40)/2px;\n        border-radius: 4px;\n        cursor: pointer;\n\n        &:hover {\n          .hover;\n        }\n\n        &-link {\n          line-height: 40px;\n          height: 40px;\n          display: block;\n          font-size: 16px;\n          color: #fff;\n          padding: 0 10px;\n\n          .el-icon-caret-bottom {\n            font-size: 14px;\n          }\n        }\n      }\n\n      .lang {\n        .fl;\n        margin-left: 10px;\n        margin-top: (64-40)/2px;\n        border-radius: 4px;\n        cursor: pointer;\n\n        &:hover {\n          .hover;\n        }\n\n        &-link {\n          display: block;\n          height: 20px;\n          line-height: 20px;\n          font-size: 12px;\n          color: #fff;\n          padding: 10px;\n\n          .el-icon-caret-bottom {\n            font-size: 12px;\n          }\n\n          em {\n            .fl;\n            width: 30px;\n            height: 20px;\n            background: url(\"../../assets/lang.jpg\") no-repeat;\n            margin-right: 6px;\n\n            &.ko_KR {\n              background-position-y: -20px;\n            }\n          }\n        }\n      }\n    }\n\n    .logo {\n      height: 64px;\n      line-height: 70px;\n      .fl;\n      width: 164px;\n      font-size: 36px;\n      font-weight: bold;\n      margin-right: 220-164px;\n    }\n\n    .menu-list {\n      height: 64px;\n      overflow: hidden;\n      .fl;\n\n      span {\n        .fl;\n        margin-top: 22px;\n        font-size: 12px;\n        height: 20px;\n        line-height: 20px;\n        border-radius: 3px;\n        background-color: #fff;\n        color: #707377;\n        padding-left: 6px;\n        margin-right: 8px;\n        overflow: hidden;\n\n        &.r {\n          margin-right: 32px;\n        }\n\n        em {\n          .fr;\n          height: 20px;\n          padding-left: 6px;\n          font-style: normal;\n          margin-left: 4px;\n          padding-right: 6px;\n          background: #bababa;\n          color: #fafafa;\n        }\n\n\n        &.s {\n          cursor: pointer;\n          background: #fff;\n\n          em {\n            background: #79bbef;\n          }\n\n          &.in em {\n            background: #67c23a;\n          }\n\n          &.out em {\n            background: #F56C6C;\n          }\n        }\n      }\n    }\n  }\n}\n\n.logout {\n  color: #F56C6C;\n}\n\n.ye {\n  background: #f9f9f9;\n  line-height: 36px;\n  padding: 0 20px;\n  color: #606266;\n  label {\n    color: #FF8A1E;\n  }\n}\n\n.sound {\n  display: none;\n}\n",{"version":3,"sources":["Header.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Header.vue","sourceRoot":"src/views/layout","sourcesContent":["<template>\n  <div style=\"position: relative;\">\n    <div class=\"menu\">\n      <div class=\"main\">\n        <div class=\"rt\">\n          <el-dropdown class=\"account\" trigger=\"click\"  placement=\"bottom\" @command=\"doCmd\">\n            <span class=\"account-link\">\n              {{member ? (member.nickname ? member.nickname : member.username) : ''}}<i class=\"el-icon-caret-bottom el-icon--right\"></i>\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item v-t=\"'change_password'\" command=\"showPwd\"></el-dropdown-item>\n              <el-dropdown-item command=\"sprofile\" v-if=\"isAdmin\" v-t=\"'profile'\"></el-dropdown-item>\n              <el-dropdown-item divided class=\"logout\" v-t=\"'logout'\" command=\"loginout\"></el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n          <el-dropdown class=\"lang\" trigger=\"click\" placement=\"bottom\" @command=\"submitLang\">\n            <span class=\"lang-link\">\n              <template v-if=\"lang === 'ko_KR'\">\n                <em class=\"ko_KR\"></em>한국어\n              </template>\n              <template v-if=\"lang === 'zh_CN'\">\n                <em></em>中文\n              </template>\n              <i class=\"el-icon-caret-bottom el-icon--right\"></i>\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item command=\"ko_KR\" v-show=\"lang !== 'ko_KR'\">한국어</el-dropdown-item>\n              <el-dropdown-item command=\"zh_CN\" v-show=\"lang !== 'zh_CN'\">中文</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </div>\n        <div class=\"logo\">FX HOS</div>\n        <div class=\"menu-list\" v-if=\"isAdmin\">\n          <span class=\"in\" :class=\"{s: topData.deposit.pending > 0}\" @click=\"finance('deposit' ,'pending', '1', '1')\">{{$t('deposit_pending')}}<em>{{topData.deposit.pending}}</em></span>\n          <span class=\"in\" :class=\"{s: topData.deposit.waitting > 0}\" @click=\"finance('deposit' ,'waitting', '1', '4')\">{{$t('deposit_waitting')}}<em>{{topData.deposit.waitting}}</em></span>\n          <span class=\"in r\" :class=\"{s: topData.deposit.completed > 0}\" @click=\"finance('deposit' ,'completed', '1', '3')\">{{$t('deposit_completed')}}<em>{{topData.deposit.completed}}</em></span>\n          <span class=\"out\" :class=\"{s: topData.withdrawal.pending > 0}\" @click=\"finance('withdrawal' ,'pending', '2', '1')\">{{$t('withdrawal_pending')}}<em>{{topData.withdrawal.pending}}</em></span>\n          <span class=\"out\" :class=\"{s: topData.withdrawal.waitting > 0}\" @click=\"finance('withdrawal' ,'waitting', '2', '4')\">{{$t('withdrawal_waitting')}}<em>{{topData.withdrawal.waitting}}</em></span>\n          <span class=\"out r\" :class=\"{s: topData.withdrawal.completed > 0}\" @click=\"finance('withdrawal' ,'completed', '2', '3')\">{{$t('withdrawal_completed')}}<em>{{topData.withdrawal.completed}}</em></span>\n          <span :class=\"{s: topData.question > 0}\" @click=\"question\">{{$t('member_question')}}<em>{{ topData.question}}</em></span>\n          <span :class=\"{s: topData.member.new > 0}\" @click=\"mem('new')\">{{$t('member_new')}}<em>{{topData.member.new}}</em></span>\n          <span :class=\"{s: topData.member.online > 0}\" @click=\"mem('online')\">{{$t('member_online')}}<em>{{topData.member.online}}</em></span>\n        </div>\n      </div>\n    </div>\n    <el-dialog :title=\"$t('change_password')\" :visible.sync=\"showPassword\" width=\"400px\">\n      <el-form label-width=\"80px\" :model=\"form\" :rules=\"rules\">\n        <el-form-item :label=\"$t('old_password')\" prop=\"old_password\">\n          <el-input v-model=\"form.old_password\" show-password></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('new_password')\" prop=\"password\">\n          <el-input v-model=\"form.password\" show-password></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('password_confirmation')\" prop=\"password_confirmation\">\n          <el-input v-model=\"form.password_confirmation\" show-password></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showPassword = false\" v-t=\"'btnNo'\"></el-button>\n        <el-button type=\"primary\" v-t=\"'btnYes'\" @click=\"changePwd\"></el-button>\n      </div>\n    </el-dialog>\n    <el-dialog title=\"个人资料\" :visible.sync=\"showProfile\" width=\"400px\" v-if=\"isAdmin\">\n      <el-form label-width=\"80px\" :model=\"form\" :rules=\"rules\">\n        <el-form-item label=\"账号\">\n          <el-input v-model=\"profile.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"姓名\">\n          <el-input v-model=\"profile.nickname\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showProfile = false\" v-t=\"'btnNo'\"></el-button>\n        <el-button type=\"primary\" v-t=\"'btnYes'\" @click=\"changeProfile\"></el-button>\n      </div>\n    </el-dialog>\n    <div class=\"sound\" v-if=\"isAdmin\">\n      <audio autoplay loop :src=\"`${soundPath}sound1.wav`\" v-if=\"topData.deposit.pending > 0\"></audio>\n      <audio autoplay loop :src=\"`${soundPath}sound2.m4r`\" v-if=\"topData.withdrawal.pending > 0\"></audio>\n      <audio autoplay loop :src=\"`${soundPath}sound3.m4r`\" v-if=\"topData.question > 0\"></audio>\n      <audio autoplay :src=\"`${soundPath}sound4.m4r`\" v-if=\"show.new\"></audio>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {mapState, mapActions} from 'vuex'\n  import ws from '../../ws'\n\n  export default {\n    data() {\n      return {\n        showPassword: false,\n        showProfile: false,\n        rules: {\n          old_password: {required: true, message: this.$t('required', [this.$t('old_password')])},\n          password: {required: true, message: this.$t('required', [this.$t('new_password')])},\n          password_confirmation: {required: true, message: this.$t('required', [this.$t('password_confirmation')])},\n        },\n        form: {\n          old_password: '',\n          password: '',\n          password_confirmation: ''\n        },\n        profile: {\n          username: '',\n          nickname: ''\n        },\n        show: {\n          new: false\n        },\n        soundPath: process.env.BASE_URL + 'sound/',\n        isFirst: true\n      }\n    },\n    computed: {\n      ...mapState([\n        'lang',\n        'member',\n        'topData',\n        'isAdmin'\n      ])\n    },\n    watch: {\n      topData(v, old) {\n        if (!this.isFirst && v.member.new > old.member.new) {\n          this.show.new = false\n          this.$nextTick(() => {\n            this.show.new = true\n          })\n        }\n        this.isFirst = false\n      }\n    },\n    methods: {\n      ...mapActions([\n        'selLang',\n        'logout',\n        'getMemberInfo',\n      ]),\n      submitLang(lang) {\n        this.selLang(lang)\n        global.location.reload()\n      },\n      showPwd() {\n        this.showPassword = true\n      },\n      sprofile() {\n        this.showProfile = true\n      },\n      loginout() {\n        this.logout().then(() => {\n          global.location.reload()\n        })\n      },\n      changePwd() {\n        this.$api.put('/tokens/password', this.form).then(data => {\n          if (data) {\n            this.showPassword = false\n            this.$message.success(this.$t('change_pwd'))\n            this.loginout()\n          }\n        })\n      },\n      changeProfile() {\n        this.$api.put('/tokens/profile', this.profile).then(data => {\n          if (data) {\n            this.loginout()\n          }\n        })\n      },\n      doCmd(cmd) {\n        this[cmd]()\n      },\n      finance(parent, key, type, status) {\n        if (this.topData[parent][key] > 0) {\n          if (this.$route.name !== 'finance') {\n            this.$router.push({name: 'finance'})\n          }\n          let date = []\n          if (key === 'completed') {\n            let today = moment().utcOffset(TZ).startOf('day').format()\n            date = [today, today]\n          }\n          this.$store.commit('setFinance', {type, status, date})\n        }\n      },\n      question() {\n        if (this.topData.question > 0) {\n          if (this.$route.name !== 'message') {\n            this.$router.push({name: 'message'})\n          }\n          this.$store.commit('setQuestion', true)\n        }\n      },\n      mem(key) {\n        if (this.topData.member[key] > 0) {\n          if (this.$route.name !== 'home') {\n            this.$router.push({name: 'home'})\n          }\n          let data = {\n            online: false,\n            date: []\n          }\n          if (key === 'new') {\n            let today = moment().utcOffset(TZ).startOf('day').format()\n            data.date = [today, today]\n          } else {\n            data.online = true\n          }\n          this.$store.commit('setMem', data)\n        }\n      }\n    },\n    mounted() {\n      if (this.isAdmin) {\n        ws.init()\n      }\n      this.getMemberInfo().then(() => {\n        this.profile.username = this.member.username\n        this.profile.nickname = this.member.nickname\n      })\n    },\n    beforeDestroy() {\n      if (this.isAdmin) {\n        ws.close()\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"less\">\n  @import \"../../assets/config\";\n\n  .top-bar {\n    background: @color_deep;\n\n    &-main {\n      .wm;\n      line-height: 46px;\n      height: 46px;\n      overflow: hidden;\n      color: #fff;\n      font-size: 12px;\n\n      a {\n\n        &:hover {\n          text-decoration: underline;\n        }\n        em {\n          font-style: normal;\n          color: #FD4322;\n        }\n      }\n    }\n  }\n\n  .menu {\n    background: @color_blue;\n    color: #fff;\n    line-height: 64px;\n\n    .main {\n      overflow: auto;\n      padding: 0 20px;\n\n      .rt {\n        .fr;\n\n        .account {\n          .fl;\n          margin-top: (64-40)/2px;\n          border-radius: 4px;\n          cursor: pointer;\n\n          &:hover {\n            .hover;\n          }\n\n          &-link {\n            line-height: 40px;\n            height: 40px;\n            display: block;\n            font-size: 16px;\n            color: #fff;\n            padding: 0 10px;\n\n            .el-icon-caret-bottom {\n              font-size: 14px;\n            }\n          }\n        }\n\n        .lang {\n          .fl;\n          margin-left: 10px;\n          margin-top: (64-40)/2px;\n          border-radius: 4px;\n          cursor: pointer;\n\n          &:hover {\n            .hover;\n          }\n\n          &-link {\n            display: block;\n            height: 20px;\n            line-height: 20px;\n            font-size: 12px;\n            color: #fff;\n            padding: 10px;\n\n            .el-icon-caret-bottom {\n              font-size: 12px;\n            }\n\n            em {\n              .fl;\n              width: 30px;\n              height: 20px;\n              background: url(\"../../assets/lang.jpg\") no-repeat;\n              margin-right: 6px;\n\n              &.ko_KR {\n                background-position-y: -20px;\n              }\n            }\n          }\n        }\n      }\n\n      .logo {\n        height: 64px;\n        line-height: 70px;\n        .fl;\n        width: 164px;\n        font-size: 36px;\n        font-weight: bold;\n        margin-right: 220-164px;\n      }\n\n      .menu-list {\n        height: 64px;\n        overflow: hidden;\n        .fl;\n\n        span {\n          .fl;\n          margin-top: 22px;\n          font-size: 12px;\n          height: 20px;\n          line-height: 20px;\n          border-radius: 3px;\n          background-color: #fff;\n          color: #707377;\n          padding-left: 6px;\n          margin-right: 8px;\n          overflow: hidden;\n\n          &.r {\n            margin-right: 32px;\n          }\n\n          em {\n            .fr;\n            height: 20px;\n            padding-left: 6px;\n            font-style: normal;\n            margin-left: 4px;\n            padding-right: 6px;\n            background: #bababa;\n            color: #fafafa;\n          }\n\n\n          &.s {\n            cursor: pointer;\n            background: #fff;\n\n            em {\n              background: #79bbef;\n            }\n\n            &.in em {\n              background: #67c23a;\n            }\n\n            &.out em {\n              background: #F56C6C;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .logout {\n    color: #F56C6C;\n  }\n\n  .ye {\n    background: #f9f9f9;\n    line-height: 36px;\n    padding: 0 20px;\n    color: #606266;\n    label {\n      color: #FF8A1E;\n    }\n  }\n\n  .sound {\n    display: none;\n  }\n</style>\n"]}]}