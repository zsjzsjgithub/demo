(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78702d58"],{"386d":function(t,e,a){"use strict";var n=a("cb7c"),r=a("83a1"),s=a("5f1b");a("214f")("search",1,function(t,e,a,i){return[function(a){var n=t(this),r=void 0==a?void 0:a[e];return void 0!==r?r.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=i(a,t,this);if(e.done)return e.value;var o=n(t),l=String(this),u=o.lastIndex;r(u,0)||(o.lastIndex=0);var c=s(o,l);return r(o.lastIndex,u)||(o.lastIndex=u),null===c?-1:c.index}]})},5176:function(t,e,a){t.exports=a("51b6")},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},aa77:function(t,e,a){var n=a("5ca1"),r=a("be13"),s=a("79e5"),i=a("fdef"),o="["+i+"]",l="​",u=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),m=function(t,e,a){var r={},o=s(function(){return!!i[t]()||l[t]()!=l}),u=r[t]=o?e(f):i[t];a&&(r[a]=u),n(n.P+n.F*o,"String",r)},f=m.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=m},c5f6:function(t,e,a){"use strict";var n=a("7726"),r=a("69a8"),s=a("2d95"),i=a("5dbc"),o=a("6a99"),l=a("79e5"),u=a("9093").f,c=a("11e9").f,m=a("86cc").f,f=a("aa77").trim,p="Number",d=n[p],b=d,h=d.prototype,_=s(a("2aeb")(h))==p,g="trim"in String.prototype,v=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():f(e,3);var a,n,r,s=e.charCodeAt(0);if(43===s||45===s){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var i,l=e.slice(2),u=0,c=l.length;u<c;u++)if(i=l.charCodeAt(u),i<48||i>r)return NaN;return parseInt(l,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof d&&(_?l(function(){h.valueOf.call(a)}):s(a)!=p)?i(new b(v(e)),a,d):v(e)};for(var w,$=a("9e1e")?u(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;$.length>N;N++)r(b,w=$[N])&&!r(d,w)&&m(d,w,c(b,w));d.prototype=h,h.constructor=d,a("2aba")(n,p,d)}},d804:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{staticClass:"search",attrs:{inline:!0,size:"mini","label-width":"80px"}},[a("el-form-item",{attrs:{label:t.$t("username")+"|"+t.$t("nickname")}},[a("el-input",{attrs:{clearable:""},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),a("el-form-item",{attrs:{label:t.$t("time_login")}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":t.$t("time_start"),"end-placeholder":t.$t("time_end")},model:{value:t.search.date,callback:function(e){t.$set(t.search,"date",e)},expression:"search.date"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"t",rawName:"v-t",value:"search",expression:"'search'"}],attrs:{type:"primary"},on:{click:function(e){return t.getData(!0)}}})],1)],1),a("div",{staticClass:"toolbar"},[a("el-button-group",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.show.update=!0}}},[t._v("+ "+t._s(t.$t("add")))]),a("el-button",{directives:[{name:"t",rawName:"v-t",value:"del",expression:"'del'"}],attrs:{type:"danger",size:"small",disabled:!t.hasSel},on:{click:t.del}})],1)],1),a("el-table",{ref:"table",attrs:{data:t.list,border:"",stripe:"",size:"mini","row-key":"id"}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"id",label:"#","min-width":"60"}}),a("el-table-column",{attrs:{label:t.$t("username")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return a("span",{staticClass:"a",on:{click:function(e){return t.edit(n)}}},[t._v(t._s(n.username))])}}])}),a("el-table-column",{attrs:{prop:"nickname",label:t.$t("nickname")}}),a("el-table-column",{attrs:{prop:"members_count",label:t.$t("member_count")}}),a("el-table-column",{attrs:{label:t.$t("deposit_sum")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return a("span",{},[t._v(t._s(t._f("numFormat")(n.deposit_sum)))])}}])}),a("el-table-column",{attrs:{label:t.$t("withdrawal_sum")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return a("span",{},[t._v(t._s(t._f("numFormat")(n.withdrawal_sum)))])}}])}),a("el-table-column",{attrs:{label:t.$t("lr_sum")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[Number(n.deposit_sum)-Number(n.withdrawal_sum)>=0?a("span",{staticStyle:{color:"#67C23A"}},[t._v("\n          "+t._s(t._f("numFormat")(Number(n.deposit_sum)-Number(n.withdrawal_sum)))+"\n        ")]):a("span",{staticStyle:{color:"#ff4949"}},[t._v(t._s(t._f("numFormat")(Number(n.deposit_sum)-Number(n.withdrawal_sum))))])]}}])}),a("el-table-column",{attrs:{label:t.$t("commission_rate")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return a("span",{},[t._v(t._s(n.commission_rate)+"%")])}}])}),a("el-table-column",{attrs:{label:t.$t("sr_sum")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[Number(n.deposit_sum)-Number(n.withdrawal_sum)>=0?a("span",{staticStyle:{color:"#67C23A"}},[t._v("\n          "+t._s(t._f("numFormat")((Number(n.deposit_sum)-Number(n.withdrawal_sum))*n.commission_rate/100))+"\n        ")]):a("span",{staticStyle:{color:"#ff4949"}},[t._v(t._s(t._f("numFormat")((Number(n.deposit_sum)-Number(n.withdrawal_sum))*n.commission_rate/100)))])]}}])}),a("el-table-column",{attrs:{prop:"balance_sum",label:t.$t("balance_sum")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return a("span",{},[t._v(t._s(t._f("numFormat")(n.balance_sum)))])}}])}),a("el-table-column",{attrs:{prop:"created_at",label:t.$t("time_join"),"min-width":"140"}}),a("el-table-column",{attrs:{prop:"logged_at",label:t.$t("time_login"),"min-width":"140"}}),a("el-table-column",{attrs:{label:t.$t("status"),"min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":t.$t("enable"),"inactive-text":t.$t("disable")},on:{change:function(e){return t.toggleEnable(n)}},model:{value:n.is_enabled,callback:function(e){t.$set(n,"is_enabled",e)},expression:"row.is_enabled"}})]}}])})],1),a("el-pagination",{staticClass:"page",attrs:{total:t.page.total,"page-size":t.page.per_page,"current-page":t.page.current,layout:"->,total,sizes,prev,pager,next,jumper","page-sizes":[10,20,30,40,50,100,500]},on:{"update:pageSize":function(e){return t.$set(t.page,"per_page",e)},"update:page-size":function(e){return t.$set(t.page,"per_page",e)},"update:currentPage":function(e){return t.$set(t.page,"current",e)},"update:current-page":function(e){return t.$set(t.page,"current",e)},"size-change":t.getData,"current-change":t.getData}}),a("el-dialog",{attrs:{title:t.form.id?t.$t("edit"):t.$t("add"),visible:t.show.update,width:"500px"},on:{"update:visible":function(e){return t.$set(t.show,"update",e)},closed:t.resetForm}},[a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:t.$t("nickname")}},[a("el-input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:t.$t("username")}},[a("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:t.$t("password")}},[a("el-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:t.$t("tel")}},[a("el-input",{model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1),a("el-form-item",{attrs:{label:t.$t("commission_rate")}},[a("el-input",{model:{value:t.form.commission_rate,callback:function(e){t.$set(t.form,"commission_rate",e)},expression:"form.commission_rate"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"t",rawName:"v-t",value:"btnNo",expression:"'btnNo'"}],on:{click:function(e){t.show.update=!1}}}),a("el-button",{directives:[{name:"t",rawName:"v-t",value:"btnYes",expression:"'btnYes'"}],attrs:{type:"primary"},on:{click:t.submit}})],1)],1)],1)},r=[],s=(a("c5f6"),a("ac6a"),a("386d"),a("5176")),i=a.n(s),o={name:"agent",data:function(){return{isReady:!1,list:[],search:{name:"",date:[]},page:{total:0,per_page:10,current:1},show:{update:!1},form:{id:"",nickname:"",username:"",password:"",tel:"",commission_rate:""}}},computed:{params:function(){var t=i()({per_page:this.page.per_page,page:this.page.current},this.search);for(var e in t)t[e]||delete t[e];return t.date&&(2===t.date.length&&(t.date_start=t.date[0].format(),t.date_end=t.date[1].format()),delete t.date),t},selIds:function(){var t=[],e=this.$refs.table.selection;return e&&e.length>0&&e.forEach(function(e){t.push(e.id)}),t},hasSel:function(){return this.isReady&&this.selIds.length>0}},methods:{getData:function(t){var e=this;!0===t&&(this.page.current=1),this.$api.get("/agents",{params:this.params}).then(function(t){t&&(e.list=t.data,e.page.total=Number(t.total))})},resetForm:function(){this.form=i()({},this.$options.data().form)},del:function(){var t=this;this.$confirm(this.$t("agent_del_confirm"),this.$t("del"),{confirmButtonText:this.$t("btnYes"),cancelButtonText:this.$t("btnNo"),type:"warning"}).then(function(){t.$api.delete("/agents",{params:{ids:t.selIds}}).then(function(e){e&&(t.getData(),t.$message.success(t.$t("success")))})}).catch(function(){})},submit:function(){var t=this;this.form.id>0?this.$api.put("/agents/".concat(this.form.id),this.form).then(function(e){e&&(t.show.update=!1,t.getData(!0))}):this.$api.post("/agents",this.form).then(function(e){e&&(t.show.update=!1,t.getData(!0))})},edit:function(t){var e={};for(var a in this.form)this.form.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a]);this.form=e,this.show.update=!0},toggleEnable:function(t){var e=this,a=t.id,n=t.is_enabled;this.$api.patch("/agents/".concat(a),{is_enabled:n}).then(function(t){t&&e.getData()})}},mounted:function(){this.getData(),this.isReady=!0}},l=o,u=a("2877"),c=Object(u["a"])(l,n,r,!1,null,null,null);e["default"]=c.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-78702d58.d39c9674.js.map